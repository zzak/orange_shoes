<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="static/favicon.ico" />
</head>
<body>

<font size=7>Sample 03</font>
<p>

<div id="canvasWrapper">
  <canvas id="orange_shoes" width="400" height="400" style="border:1px solid black;"></canvas>
</div>

<script type="text/javascript" language="JavaScript" src="js/orange_shoes.js"></script>

<script type="text/javascript" language="JavaScript">

window.onload = function() {
 
  vx = 3
  vy = 4
  nx = 0
  ny = 0
  ball_left = 0
  ball_top = 0
  comp_left = 0
  you_left = 0
  function main(){
    context.clearRect(0, 0, canvas.width,canvas.height);
        if (ball_top + 10 < 0 || ball_top > 400) {
      if(ball_top > 400) {
        text("Computer WIN!", 30, 200, "40pt", "Calibri");
      } else {
        text("You WIN!", 30, 200, "40pt", "Calibri");
      }
    } else {
      nx = ball_left + vx
      ny = ball_top + vy

      if (nx + 10 > 400 || nx < 0) { vx = -vx }

      if (ny + 10 > 400 && nx + 10 > you_left && nx < you_left + 75) {
        vy = -vy * 1.2
        vx = (nx - you_left - 37.5) * 0.25
      }
      
      if (ny < 0 && nx + 10 > comp_left && nx < comp_left + 75) {
        vy = -vy * 1.2
        vx = (nx - comp_left - 37.5) * 0.25
      }
      if (comp_left + 75 < ball_left) { comp_left += 10 }
      if (ball_left + 10 < comp_left) { comp_left -= 10 }

      ball_left = nx
      ball_top = ny
      oval('forestgreen', ball_left, ball_top, 10)
      rect('black', comp_left, 0, 75, 4)
      you_left = mouseX - 37.5
      rect('black', you_left, 396, 75, 4)
    }
  }
  setInterval(main, 20);
  main();
}
</script>

<p> 
<font size=7>Code</font> 
<pre> 
# Orange Shoes sample3.rb
require 'orange_shoes'

Shoes.app width: 400, height: 400, interval: 20 do
  js text =<<-EOS, :vars
  vx = 3
  vy = 4
  nx = 0
  ny = 0
  ball_left = 0
  ball_top = 0
  comp_left = 0
  you_left = 0
  EOS

  js test =<<-EOS
    if (ball_top + 10 < 0 || ball_top > 400) {
      if(ball_top > 400) {
        text("Computer WIN!", 30, 200, "40pt", "Calibri");
      } else {
        text("You WIN!", 30, 200, "40pt", "Calibri");
      }
    } else {
      nx = ball_left + vx
      ny = ball_top + vy

      if (nx + 10 > 400 || nx < 0) { vx = -vx }

      if (ny + 10 > 400 && nx + 10 > you_left && nx < you_left + 75) {
        vy = -vy * 1.2
        vx = (nx - you_left - 37.5) * 0.25
      }
      
      if (ny < 0 && nx + 10 > comp_left && nx < comp_left + 75) {
        vy = -vy * 1.2
        vx = (nx - comp_left - 37.5) * 0.25
      }
      if (comp_left + 75 < ball_left) { comp_left += 10 }
      if (ball_left + 10 < comp_left) { comp_left -= 10 }

      ball_left = nx
      ball_top = ny
      oval('forestgreen', ball_left, ball_top, 10)
      rect('black', comp_left, 0, 75, 4)
      you_left = mouseX - 37.5
      rect('black', you_left, 396, 75, 4)
    }
  EOS   
end
</pre>

</body>
</html>
